Screen_Detalle_Folio As screen:
    BackgroundImage: =PantallaCel3
    ImagePosition: =ImagePosition.Stretch
    OnVisible: |
        =Refresh(CheckinOutProvContr);
        ClearCollect(colChecks, Filter(CheckinOutProvContr, Title=varRegistroSelectProv.Title && Fecha=Text(Now(), "dd-mm-yyyy")));

    Label3 As label:
        Align: =Align.Center
        Color: =RGBA(184, 0, 0, 1)
        FontWeight: =FontWeight.Bold
        Height: =60
        Size: =If(Screen_Detalle_Folio.Size > 2, 30, 15)
        Text: ="Seguridad / Protección"
        Width: =Parent.Width
        ZIndex: =1

    Label3_1 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        Fill: =RGBA(54, 176, 75, 1)
        FontWeight: =FontWeight.Bold
        Size: =If(Screen_Detalle_Folio.Size > 2, 20, 15)
        Text: ="Registro"
        Width: =Parent.Width
        Y: =Label3.Y+Label3.Height
        ZIndex: =2

    Container5 As groupContainer.horizontalAutoLayoutContainer:
        Height: =Parent.Height-Label3_1.Height-Label3.Height-20
        LayoutDirection: =If(Screen_Detalle_Folio.Size > 2, LayoutDirection.Horizontal, LayoutDirection.Vertical)
        LayoutGap: =10
        LayoutMode: =LayoutMode.Auto
        LayoutOverflowY: =LayoutOverflow.Scroll
        PaddingLeft: =5
        PaddingTop: =5
        Width: =Parent.Width
        Y: =Label3_1.Y+Label3_1.Height+20
        ZIndex: =3

        Container8 As groupContainer.verticalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.Start
            BorderThickness: =1
            Height: =Container11.Height+Label15.Height+Container11_1.Height+Container11_2.Height+Container11_3.Height+Container11_4.Height+Container11_5.Height*2+Image1.Height+Container11_9.Height
            LayoutAlignItems: =LayoutAlignItems.Stretch
            LayoutDirection: =LayoutDirection.Vertical
            LayoutMinHeight: =Container11.Height+Label15.Height+Container11_1.Height+Container11_2.Height+Container11_3.Height+Container11_4.Height+Container11_5.Height*2+Image1.Height+Container11_9.Height
            LayoutMinWidth: =0
            LayoutMode: =LayoutMode.Auto
            PaddingLeft: =5
            PaddingRight: =5
            Width: =Parent.Width-20
            X: =121
            Y: =258
            ZIndex: =1

            Container11 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =40
                LayoutMinHeight: =100
                LayoutMinWidth: =0
                LayoutMode: =LayoutMode.Auto
                ZIndex: =1

                Label13 As label:
                    FillPortions: =1
                    LayoutMinWidth: =0
                    Text: ="Proveedor (P) o  Contratista  (C)"
                    ZIndex: =1

                Label14 As label:
                    Align: =Align.Center
                    BorderThickness: =1
                    Fill: =RGBA(186, 202, 226, 1)
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    LayoutMinWidth: =0
                    Text: =varRegistroSelectProv.TipoUsuario
                    ZIndex: =2

            Label15 As label:
                Align: =Align.Center
                FontWeight: =FontWeight.Semibold
                LayoutMinWidth: =0
                Text: =Upper(varRegistroSelectProv.Nombre)
                ZIndex: =2

            Container11_1 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =40
                LayoutMinHeight: =100
                LayoutMinWidth: =0
                LayoutMode: =LayoutMode.Auto
                ZIndex: =3

                Label13_1 As label:
                    Align: =Align.Right
                    FillPortions: =1
                    LayoutMinWidth: =0
                    Text: |-
                        ="Área asignada:"
                    ZIndex: =1

                Label14_1 As label:
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    LayoutMinWidth: =0
                    Text: =varRegistroSelectProv.AreaAsignada
                    ZIndex: =2

            Container11_2 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =40
                LayoutMinHeight: =100
                LayoutMinWidth: =0
                LayoutMode: =LayoutMode.Auto
                ZIndex: =4

                Label13_2 As label:
                    Align: =Align.Right
                    FillPortions: =1
                    LayoutMinWidth: =0
                    Text: |-
                        ="Compañía:"
                    ZIndex: =1

                Label14_2 As label:
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    LayoutMinWidth: =0
                    Text: =varRegistroSelectProv.Compania
                    ZIndex: =2

            Container11_3 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =If(Screen_Detalle_Folio.Size > 2, 40, 80)
                LayoutMinHeight: =100
                LayoutMinWidth: =0
                LayoutMode: =LayoutMode.Auto
                ZIndex: =5

                Label13_3 As label:
                    Align: =Align.Right
                    FillPortions: =1
                    Height: =If(Screen_Detalle_Folio.Size > 2, 40, 80)
                    LayoutMinWidth: =0
                    Text: |-
                        ="Folio:"
                    ZIndex: =1

                Label14_3 As label:
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    Height: =If(Screen_Detalle_Folio.Size > 2, 40, 80)
                    LayoutMinWidth: =0
                    Text: =varRegistroSelectProv.Title
                    ZIndex: =2

            Container11_4 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =40
                LayoutMinHeight: =100
                LayoutMinWidth: =0
                LayoutMode: =LayoutMode.Auto
                ZIndex: =6

                Label13_4 As label:
                    Align: =Align.Right
                    FillPortions: =1
                    LayoutMinWidth: =0
                    Text: |-
                        ="Vehículo:"
                    ZIndex: =1

                Label14_4 As label:
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    LayoutMinWidth: =0
                    Text: =varRegistroSelectProv.MarcaVehiculo
                    ZIndex: =2

            Container11_5 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =40
                LayoutMinHeight: =100
                LayoutMinWidth: =0
                LayoutMode: =LayoutMode.Auto
                ZIndex: =7

                Label13_5 As label:
                    Align: =Align.Right
                    FillPortions: =1
                    LayoutMinWidth: =0
                    Text: |-
                        ="Placa:"
                    ZIndex: =1

                Label14_5 As label:
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    LayoutMinWidth: =0
                    Text: =varRegistroSelectProv.Placas
                    ZIndex: =2

            Container11_6 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =40
                LayoutMinHeight: =100
                LayoutMinWidth: =0
                LayoutMode: =LayoutMode.Auto
                ZIndex: =8

                Label13_6 As label:
                    Align: =Align.Right
                    FillPortions: =1
                    LayoutMinWidth: =0
                    Text: |-
                        ="Vigencia:"
                    ZIndex: =1

                Label14_6 As label:
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    LayoutMinWidth: =0
                    Text: =varRegistroSelectProv.FechaInicio & " - " & varRegistroSelectProv.FechaFin
                    ZIndex: =2

            Container11_9 As groupContainer.horizontalAutoLayoutContainer:
                AlignInContainer: =AlignInContainer.SetByContainer
                FillPortions: =0
                Height: =40
                LayoutMinHeight: =100
                LayoutMinWidth: =0
                LayoutMode: =LayoutMode.Auto
                ZIndex: =9

                Label13_9 As label:
                    Align: =Align.Right
                    FillPortions: =1
                    LayoutMinWidth: =0
                    Text: ="Clave de acceso"
                    ZIndex: =1

                Label14_9 As label:
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    LayoutMinWidth: =0
                    Text: =varRegistroSelectProv.KeyAcceso
                    ZIndex: =2

            Image1 As image:
                Image: =Substitute(varRegistroSelectProv.Firma,Char(34),"")
                PaddingBottom: =10
                ZIndex: =10

        Container9 As groupContainer.verticalAutoLayoutContainer:
            AlignInContainer: =AlignInContainer.Start
            Height: =Container1.Height+Container1_1.Height+Image4.Height+Image4_1.Height+100+Image4_6.Height
            LayoutAlignItems: =LayoutAlignItems.Center
            LayoutDirection: =LayoutDirection.Vertical
            LayoutGap: =10
            LayoutMinHeight: =Container1.Height+Container1_1.Height+Image4.Height+Image4_1.Height+100+Image4_6.Height
            LayoutMinWidth: =0
            LayoutMode: =LayoutMode.Auto
            Width: =Parent.Width-20
            X: =703
            Y: =279
            ZIndex: =2

            Container1 As groupContainer.horizontalAutoLayoutContainer:
                FillPortions: =0
                Height: =40
                LayoutGap: =5
                LayoutMinHeight: =100
                LayoutMinWidth: =0
                LayoutMode: =LayoutMode.Auto
                ZIndex: =1

                Image3 As image:
                    DisplayMode: =If(IsBlank(First(colChecks).CheckIn), DisplayMode.Edit, DisplayMode.Disabled)
                    Height: =40
                    Image: ='log-in'
                    OnSelect: =Set(_popupEntrada, true);
                    Width: =40
                    ZIndex: =1

                Label4 As label:
                    DisplayMode: =If(IsBlank(First(colChecks).CheckIn), DisplayMode.Edit, DisplayMode.Disabled)
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    LayoutMinWidth: =0
                    OnSelect: =Set(_popupEntrada, true);
                    Text: ="Registrar Entrada"
                    ZIndex: =2

                Label4_2 As label:
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    LayoutMinWidth: =0
                    Text: =First(colChecks).CheckIn //varRegistroSelect.HoraEntrada
                    ZIndex: =3

            Container1_1 As groupContainer.horizontalAutoLayoutContainer:
                FillPortions: =0
                Height: =40
                LayoutGap: =5
                LayoutMinHeight: =100
                LayoutMinWidth: =0
                LayoutMode: =LayoutMode.Auto
                ZIndex: =2

                Image3_1 As image:
                    DisplayMode: =If(IsBlank(First(colChecks).CheckOut), DisplayMode.Edit, DisplayMode.Disabled)
                    Height: =40
                    Image: ='log-in (1)'
                    OnSelect: =Set(_popupSalida, true);
                    Width: =40
                    ZIndex: =1

                Label4_1 As label:
                    DisplayMode: =If(IsBlank(First(colChecks).CheckOut), DisplayMode.Edit, DisplayMode.Disabled)
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    LayoutMinWidth: =0
                    OnSelect: =Set(_popupSalida, true);
                    Text: ="Registrar Salida"
                    ZIndex: =2

                Label4_3 As label:
                    FillPortions: =1
                    FontWeight: =FontWeight.Bold
                    LayoutMinWidth: =0
                    Text: =First(colChecks).CheckOut//varRegistroSelect.HoraSalida
                    ZIndex: =3

            Image4 As image:
                AlignInContainer: =AlignInContainer.Stretch
                Height: =50
                Image: =BotónHyE
                LayoutMinWidth: =0
                OnSelect: =Navigate(Screen_Detalle_Herramienta,ScreenTransition.Cover)
                ZIndex: =3

            Image4_1 As image:
                AlignInContainer: =AlignInContainer.Stretch
                DisplayMode: =If(!IsBlank(First(colChecks).TipoVisita), DisplayMode.Disabled, Edit)
                Height: =50
                Image: =BotónNegarAcceso
                LayoutMinWidth: =0
                OnSelect: =Set(_bandNegarAcceso, true);
                Visible: =If(!IsBlank(First(colChecks).TipoVisita), false, true)
                ZIndex: =4

            Image4_6 As image:
                AlignInContainer: =AlignInContainer.Stretch
                Height: =50
                Image: =BotónHistorialVisitas
                LayoutMinWidth: =0
                OnSelect: =Navigate(Screen_Historial_Visitas,ScreenTransition.Cover)
                ZIndex: =5

    Group7 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =6

        Image7_2 As image:
            Height: =If(Screen_Index.Size > 2, 50, 40)
            Image: =BotónHome
            Width: =If(Screen_Index.Size > 2, 50, 40)
            X: =Parent.Width-Image7_2.Width
            ZIndex: =4

        Icon1_2 As icon.Cancel:
            Color: =RGBA(0, 0, 0, 0)
            Height: =Image7_2.Height
            Icon: =Icon.Cancel
            OnSelect: =Navigate(Screen_Index,ScreenTransition.Cover)
            Width: =Image7_2.Width
            X: =Image7_2.X
            Y: =Image7_2.Y
            ZIndex: =5

    Group7_1 As group:
        Height: =5
        Width: =5
        X: =1286
        Y: =40
        ZIndex: =9

        Image7_6 As image:
            Height: =If(Screen_Index.Size > 2, 50, 40)
            Image: =BotónAtrás
            Width: =If(Screen_Index.Size > 2, 50, 40)
            ZIndex: =7

        Icon1_6 As icon.Cancel:
            Color: =RGBA(0, 0, 0, 0)
            Height: =Image7_6.Height
            Icon: =Icon.Cancel
            OnSelect: =Navigate(Screen_Busqueda_Folio,ScreenTransition.Cover)
            Width: =Image7_6.Width
            X: =Image7_6.X
            Y: =Image7_6.Y
            ZIndex: =8

    Label5_5 As label:
        Align: =Align.Center
        FontWeight: =FontWeight.Bold
        Text: ="¿Quieres negar el acceso a este día?"
        Visible: =_bandNegarAcceso
        Width: =Rectangle2.Width
        X: =Rectangle2.X
        Y: =Rectangle2.Y
        ZIndex: =17

    Group3 As group:
        Height: =5
        Width: =5
        X: =40
        Y: =40
        ZIndex: =17

        Rectangle1 As rectangle:
            Fill: =RGBA(255, 255, 255, 0.69)
            Height: =Parent.Height
            Visible: =_popupEntrada Or _popupSalida Or _bandNegarAcceso
            Width: =Parent.Width
            ZIndex: =9

        Rectangle2 As rectangle:
            BorderColor: =RGBA(0, 0, 0, 1)
            BorderThickness: =1
            Fill: =RGBA(255, 255, 255, 1)
            Height: =300
            Visible: =_popupEntrada Or _popupSalida Or _bandNegarAcceso
            Width: =If(Screen_Detalle_Folio.Size > 2, Parent.Width/3, Parent.Width-20)
            X: =Parent.Width/2-Self.Width/2
            Y: =Parent.Height/2-Self.Height/2
            ZIndex: =10

        Label5 As label:
            Align: =Align.Center
            FontWeight: =FontWeight.Bold
            Text: =If(_popupSalida, "¿Registrar Salida?", "¿Registrar Entrada?")
            Visible: =_popupEntrada Or _popupSalida
            Width: =Rectangle2.Width
            X: =Rectangle2.X
            Y: =Rectangle2.Y
            ZIndex: =11

        separador As label:
            Text: =""
            Visible: =_popupEntrada Or _popupSalida Or _bandNegarAcceso
            Width: =10
            X: =Parent.Width/2-Self.Width/2
            Y: =Label5.Y
            ZIndex: =12

        Image5 As image:
            Height: =50
            Image: =BotónAceptar
            OnSelect: |-
                =If(CountRows(colChecks)=0,
                    Patch(CheckinOutProvContr, { Title: varRegistroSelectProv.Title, CheckIn: Text(Now(), "hh:mm"), Fecha: Text(Now(), "dd-mm-yyyy"), TipoVisita: "Visitado"  }),
                    UpdateIf(CheckinOutProvContr, ID=First(colChecks).ID, { CheckOut: Text(Now(), "hh:mm") })
                );
                Refresh(CheckinOutProvContr);
                ClearCollect(colChecks, Filter(CheckinOutProvContr, Title=varRegistroSelectProv.Title && Fecha=Text(Now(), "dd-mm-yyyy")));
                Set(_popupEntrada, false);Set(_popupSalida, false);
                /*
                If(_popupEntrada; 
                    UpdateIf(RegIngreProvContr; ID=varRegistroSelect.ID; { HoraEntrada: Text(Now(); "hh:mm")});
                    UpdateIf(RegIngreProvContr; ID=varRegistroSelect.ID; { HoraSalida: Text(Now(); "hh:mm")}) 
                );;
                Refresh(RegIngreProvContr);;
                ClearCollect(colRegIngreProvContr; RegIngreProvContr);;
                Set(varRegistroSelect; First(Filter(colRegIngreProvContr; ID=varRegistroSelect.ID)));;
                Set(_popupEntrada; false);;Set(_popupSalida; false);;
                */
            Visible: =_popupEntrada Or _popupSalida
            Width: =50
            X: =separador.X-Self.Width*2
            Y: =(Rectangle2.Y+Rectangle2.Height/2)-Self.Height/2
            ZIndex: =13

        Image5_1 As image:
            Height: =40
            Image: =BotónCancelar
            OnSelect: =Set(_popupEntrada, false);Set(_popupSalida, false);
            Visible: =_popupEntrada Or _popupSalida
            Width: =50
            X: =separador.X+Self.Width*2
            Y: =(Rectangle2.Y+Rectangle2.Height/2)-Self.Height/2
            ZIndex: =14

        Label7 As label:
            Align: =Align.Center
            FontWeight: =FontWeight.Bold
            OnSelect: =Set(_popupEntrada, false);Set(_popupSalida, false);
            Size: =15
            Text: ="SI"
            Visible: =_popupEntrada Or _popupSalida
            Width: =Image5.Width
            X: =Image5.X
            Y: =Image5.Y+Image5.Height
            ZIndex: =15

        Label7_1 As label:
            Align: =Align.Center
            FontWeight: =FontWeight.Bold
            OnSelect: =Set(_popupEntrada, false);Set(_popupSalida, false);
            Size: =15
            Text: ="NO"
            Visible: =_popupEntrada Or _popupSalida
            Width: =Image5_1.Width
            X: =Image5_1.X
            Y: =Image5_1.Y+Image5_1.Height
            ZIndex: =16

    Image5_2 As image:
        Height: =50
        Image: =BotónAceptar
        OnSelect: |
            =If(IsBlank(Trim(TextInput10.Text)),
                Notify("Debes de ingresar el motivo por el cual negarás el acceso")
                ,
                Patch(CheckinOutProvContr, { Title: varRegistroSelectProv.Title, CheckIn: Text(Now(), "hh:mm"), CheckOut: Text(Now(), "hh:mm"), Comentarios: TextInput10.Text, Fecha: Text(Now(), "dd-mm-yyyy"), TipoVisita: "Negada" });
                Refresh(CheckinOutProvContr);
                ClearCollect(colChecks, Filter(CheckinOutProvContr, Title=varRegistroSelectProv.Title && Fecha=Text(Now(), "dd-mm-yyyy")));
                Reset(TextInput10);
                Set(_bandNegarAcceso, false);
            );
        Visible: =_bandNegarAcceso
        Width: =50
        X: =TextInput10.X
        Y: =TextInput10.Y+TextInput10.Height+10
        ZIndex: =18

    Image5_3 As image:
        Height: =40
        Image: =BotónCancelar
        OnSelect: =Set(_bandNegarAcceso, false);Reset(TextInput10);
        Visible: =_bandNegarAcceso
        Width: =50
        X: =TextInput10.X+TextInput10.Width-Self.Width
        Y: =TextInput10.Y+TextInput10.Height+10
        ZIndex: =19

    TextInput10 As text:
        BorderColor: =RGBA(0, 0, 0, 1)
        Default: =""
        Height: =100
        HintText: ="Ingresa el motivo por el cual negarás el acceso"
        Visible: =_bandNegarAcceso
        Width: =If(Screen_Detalle_Folio.Size > 2, Rectangle2.Width-Rectangle2.Width/3, Rectangle2.Width-10)
        X: =Parent.Width/2-Self.Width/2
        Y: =Label5_5.Y+Label5_5.Height*2
        ZIndex: =20

    Label7_44 As label:
        Align: =Align.Center
        FontWeight: =FontWeight.Bold
        OnSelect: =Set(_popupEntrada, false);Set(_popupSalida, false);
        Size: =15
        Text: ="SI"
        Visible: =_bandNegarAcceso
        Width: =Image5_2.Width
        X: =Image5_2.X
        Y: =Image5_2.Y+Image5_2.Height
        ZIndex: =21

    Label7_45 As label:
        Align: =Align.Center
        FontWeight: =FontWeight.Bold
        OnSelect: =Set(_popupEntrada, false);Set(_popupSalida, false);
        Size: =15
        Text: ="NO"
        Visible: = _bandNegarAcceso
        Width: =Image5_3.Width
        X: =Image5_3.X
        Y: =Image5_3.Y+Image5_3.Height
        ZIndex: =22

